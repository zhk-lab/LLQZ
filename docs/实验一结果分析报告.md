# 实验一结果分析报告（BioASQ，动态检索策略对比）

> 本报告面向论文写作：总结实验设定、关键结果、图像解读与结论。  
> 对应产物：`runs/exp1/metrics_k3_all_strategies.json`、`plots/exp1_retrieval_metrics_k3_all_strategies.png`、`plots/exp1_effect_vs_cost_k3_all_strategies.png`。

---

## 1. 实验目的与核心问题

实验一比较四种检索策略在生物医学问答中的效果差异：

- `sparse_only`（BM25）
- `dense_only`（向量检索）
- `hybrid`（稀疏+向量融合）
- `hybrid_rerank`（融合后重排序）

核心关注点：

1. 重排序是否显著提升前列证据质量（MRR/nDCG/Hit）？
2. 准确性提升是否值得额外时延成本？

---

## 2. 评估口径与为何采用 top_k=3

本轮报告采用：

- 评估文件：`runs/exp1/metrics_k3_all_strategies.json`
- 指标：Recall@K、Hit@K、MRR@K、nDCG@K、Token-F1、Citation Precision、Latency
- 评估口径：`K=3`

采用 `K=3` 的原因：

- 与后续实验三 `top_n=5` 的“小上下文证据优先”思想一致（都强调前几条证据质量）；
- `hybrid_rerank` 的主要收益来自“把正确证据前置”，在小 K 下更容易体现优势；
- 相比 `K=20`，`K=3` 能更清晰反映系统真实推理时可见证据的质量差异。

---

## 3. 主要结果（K=3）

### 3.1 检索质量总览

| Strategy | Recall@3 | Hit@3 | MRR@3 | nDCG@3 |
|---|---:|---:|---:|---:|
| sparse_only | 0.3274 | 0.8099 | 0.7530 | 0.7553 |
| dense_only | 0.3537 | 0.8700 | 0.8192 | 0.8269 |
| hybrid | 0.3609 | 0.8639 | 0.8136 | 0.8367 |
| **hybrid_rerank** | **0.3941** | **0.9115** | **0.8757** | **0.9195** |

对 `hybrid -> hybrid_rerank` 的提升（绝对值）：

- Recall@3：`+0.0332`
- Hit@3：`+0.0477`
- MRR@3：`+0.0621`
- nDCG@3：`+0.0828`

结论：在 `K=3` 下，`hybrid_rerank` 对“前列证据质量”的提升明显，优势清晰可见。

### 3.2 回答质量与引用质量

`hybrid_rerank` 同时优于 `hybrid`：

- Token-F1：`0.1977` vs `0.1875`
- Citation Precision：`0.7702` vs `0.7282`

说明：前列证据质量的提升，确实传导到了回答文本与引用可靠性。

### 3.3 成本（效率）

`hybrid_rerank` 时延明显更高：

- avg latency：`18602.76 ms`（hybrid 为 `10616.23 ms`）

这符合预期：重排序带来质量增益，但增加计算成本。

---

## 4. 与 K=20 的对比（为何“之前看起来不显著”）

在 `K=20`（旧口径）下，`hybrid` 与 `hybrid_rerank` 的：

- Recall@20、Hit@20 基本重合（都约 `0.6445` / `0.9518`）
- 主要差异集中在 MRR/nDCG

这会造成“优势不明显”的观感。原因是：

- 当 K 很大时，系统更容易“都能命中”，命中类指标趋于饱和；
- rerank 的真实作用是调整顺序（前置正确证据），小 K 更能体现该作用。

因此，若论文目标是证明 rerank 在实际可用上下文中的价值，`K=3` 比 `K=20` 更有解释力。

---

## 5. 图像解读

### 5.1 图 1：四策略检索质量对比（K=3）

文件：`plots/exp1_retrieval_metrics_k3_all_strategies.png`

观察：

- `hybrid_rerank` 在四项检索指标上均为最高；
- 与 `hybrid` 差距在 `MRR@3`、`nDCG@3` 上最显著，体现“前置能力”。

### 5.2 图 2：效果-成本权衡

文件：`plots/exp1_effect_vs_cost_k3_all_strategies.png`

观察：

- `hybrid_rerank` 位于“高效果/高成本”区域；
- dense/hybrid 形成“中高效果/中成本”折中带；
- sparse_only 成本较低但效果最弱。

---

## 6. 结论（可直接用于论文）

在 BioASQ 实验一中，采用 `K=3` 的评估口径后，`hybrid_rerank` 相比 `hybrid` 在前列证据质量上显示出稳定且明显优势（Recall/Hit/MRR/nDCG 全面提升），并进一步改善了回答质量与引用准确率。该优势以更高推理时延为代价，体现了“质量-成本”可解释权衡。基于实验三对前列证据依赖的设定，后续章节建议采用 `K=3` 口径报告实验一主结果。

---

## 7. 局限性与后续改进

- 当前回答质量使用 Token-F1，可能低估同义改写带来的真实改进；
- 可补充配对显著性检验（如 Wilcoxon / bootstrap）进一步强化统计结论；
- 若强调工程可用性，可新增“单位时间正确证据收益”指标（质量提升/额外时延）。

